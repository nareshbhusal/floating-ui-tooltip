!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("tslib"),require("@floating-ui/dom")):"function"==typeof define&&define.amd?define(["tslib","@floating-ui/dom"],e):(t="undefined"!=typeof globalThis?globalThis:t||self)["floating-ui-tooltip"]=e(t.tslib,t.dom)}(this,(function(t,e){"use strict";function i(t,e,i){var o=e+"EventListener";["transitionend","webkitTransitionEnd","oTransitionEnd"].forEach((function(e){t[o](e,i)}))}function o(t,e){t.setAttribute("data-transition-state",e),console.log(">> new transition state: "+e)}function n(t,e){t.setAttribute("data-state",e),Object.assign(t.style,{visibility:e})}function r(){return document.createElement("div")}function s(t){return{box:t.querySelector(".floating-ui-tooltip-box"),content:t.querySelector(".floating-ui-tooltip-content"),arrow:t.querySelector(".floating-ui-tooltip-arrow")||void 0}}function a(t,e){var r=t._instance,s=t.getAttribute("data-transition-state");if(console.log("``````````"),console.log("\n"),console.log(e,s),"visible"===e){if("shown"===s||"showing"===s)return void console.log("already "+s);if("hidden"===s)console.log("showing"),o(t,"showing");else if("hiding"===s)return void console.log("cancelling "+s)}else{if("hidden"===s||"hiding"===s)return void console.log("already "+s);if("shown"===s)o(t,"hiding"),r.props.onHide(r);else if("showing"===s)return void console.log("cancelling "+s)}var a="visible"===e?"shown":"hidden";0!==r.transitionDuration?(!function(t,e){function o(n){if(n.target===t){i(t,"remove",o);try{e()}catch(e){console.error(e),t._instance.props.onHide()}}}i(t,"remove",o),i(t,"add",o)}(t,(function(){!function(t,e){t._instance.setState({isShown:"visible"===e})}(t,e),o(t,a),"visible"===e&&r.props.onShow(r)})),n(t,e)):(n(t,e),o(t,a),"visible"===e&&r.props.onShow(r))}var l={top:"bottom",right:"left",bottom:"top",left:"right"},d=function(i,o,n,r,d,p){return t.__awaiter(void 0,void 0,void 0,(function(){var c,u,h,f,g,b,v,w,m,x,y,_,E,S,O,k,C,T,H,D,L,A,z,j,P,R,U,q,M,N,I,W,V,F,X,B,G;return t.__generator(this,(function(J){switch(J.label){case 0:return h=void 0!==(u=(c={}).toFlip)&&u,g=void 0===(f=c.toShift)||f,b=i.placement,v=i.hideOnReferenceHidden,w=i.offset,m=i.hideOnTooltipEscape,x=i.arrowSizeScale,y=i.resetPlacementOnUpdate,_=i.arrow,E=i.showOnCreate,S=s(o),O=S.arrow,k=12*x,n?(C="auto"===b&&(d||y),T="auto"!==b&&h,H=g&&d,D={middleware:t.__spreadArray(t.__spreadArray(t.__spreadArray(t.__spreadArray(t.__spreadArray([e.offset({mainAxis:w[0],crossAxis:w[1]})],C?[e.autoPlacement()]:[],!0),H?[e.shift({padding:16})]:[],!0),T?[e.flip({fallbackPlacements:["right","left"],fallbackStrategy:"initialPlacement"})]:[],!0),_?[e.arrow({element:O,padding:2})]:[],!0),[e.size({apply:function(t){t.width,t.height,t.reference,t.floating}}),e.hide()],!1)},"auto"!==b&&(D.placement=b),[4,e.computePosition(n,o,D)]):[2];case 1:switch(L=J.sent(),A=L.x,z=L.y,j=L.placement,P=L.middlewareData,R=P.hide,U=R.referenceHidden,q=R.escaped,U&&d&&n.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),P.arrow&&(M=P.arrow.x,N=P.arrow.y),I=0!==P.arrow.centerOffset,"visible"===(W=v&&U||m&&q||r?"hidden":"visible")&&d&&!E&&(W="hidden"),a(o,W),Object.assign(o.style,{left:A+"px",top:z+"px"}),V=l[j.split("-")[0]],F=0,X=0,B=0,B=null!==M?M+k+"px":"",V){case"top":F=1/1.7,B=null!==M?M+k*F+"px":"";break;case"bottom":F=.5,B=null!==M?M+k*F+"px":"";break;case"left":F=.005,B=null!==M?M+"px":"",X=null!==N?N-k*F/2+"px":"";break;case"right":F=1.2,B=null!==M?M+"px":"",X=null!==N?N-k*F/2+"px":""}return X=null!==N?N-k*F/2+"px":"",X=null!==N?N+"px":"",Object.assign(O.style,((G={visibility:I?"hidden":"visible",left:B,top:X,right:"",bottom:""})[V]="-"+k*F+"px",G)),p({fui:L}),[2,L]}}))}))},p={allowHTML:!0,content:"",arrow:!0,scrollIntoView:!1,transitionDuration:[300,250],offset:[10,0],hideOnClick:!0,onClickOutside:function(t,e){},onShow:function(t){},onHide:function(t){},onStateChange:function(t,e){},onRemove:function(){},placement:"top",resetPlacementOnUpdate:!1,hideOnTooltipEscape:!0,hideOnReferenceHidden:!0,showOnCreate:!0,maxWidth:350,updateDebounce:100,zIndex:99999,arrowSizeScale:1,updateOnEvents:"resize scroll"};var c=function(){function i(t,e){var i,o=this;this.state={isShown:!1,isRemoved:!1,fui:void 0},this.updateListenerCleanup=function(){},this.toHideTooltip=!1,this.transitionDuration=0,this.clickHandler=function(t){o.state.isShown&&(o.tooltipElement.contains(t.target)||o.reference.contains(t.target)||o.props.onClickOutside&&o.props.onClickOutside(o,t),"target"===o.props.hideOnClick?t.target===o.reference&&o.hide():o.props.hideOnClick&&o.hide())},this.props=t,this.reference=e,(i=document.createElement("style")).type="text/css",i.setAttribute("floating-ui-tooltip-default",""),i.textContent=".floating-ui-tooltip-root{--color:#fff;--border-color:#fefefe;--border-color:red;backface-visibility:hidden;background:var(--color);border-radius:6px;box-shadow:0 0 0 1px rgba(6,44,82,.1),0 2px 16px rgba(33,43,54,.08);box-shadow:0 0 20px 4px rgba(154,161,177,.15),0 4px 80px -8px rgba(36,40,47,.25),0 4px 4px -2px rgba(91,94,105,.15);display:flex;font-size:90%;line-height:0px;margin:0;max-width:calc(100vw - 10px);padding:0;position:absolute;transition-duration:.2s;transition-property:transform,visibility,opacity;transition-timing-function:cubic-bezier(.54,1.5,.38,1.11);z-index:9999}.floating-ui-tooltip-arrow{box-shadow:0 0 0 1px rgba(6,44,82,.1),0 2px 16px rgba(33,43,54,.08);height:14px;position:absolute;transform:translateX(-50%) rotate(45deg);width:14px;z-index:-1}.floating-ui-tooltip-box{border-radius:inherit;line-height:normal;margin:0;outline:0;position:relative}.floating-ui-tooltip-root[data-state=hidden]{opacity:0}.floating-ui-tooltip-root[data-state=visible]{opacity:1}.floating-ui-tooltip-content{background-color:#fff;border-radius:inherit;color:#111;padding:0;position:relative;z-index:2}.floating-ui-tooltip-arrow,.floating-ui-tooltip-root{background:var(--color)}",document.head.appendChild(i),this.toHideTooltip=!this.props.showOnCreate}return i.prototype.hookEventListeners=function(){var t,i,o,n=this;this.debouncedUpdate=(t=this.update.bind(this),0===(i=this.props.updateDebounce)?t:function(e){clearTimeout(o),o=setTimeout((function(){t(e)}),i)});var r=e.autoUpdate(this.reference,this.tooltipElement,(function(){return n.debouncedUpdate(void 0)})),s=function(){return n.debouncedUpdate(void 0)};this.props.updateOnEvents.split(" ").forEach((function(t){window.addEventListener(t,s)})),window.addEventListener("click",this.clickHandler.bind(this)),this.updateListenerCleanup=function(){r(),window.removeEventListener("click",n.clickHandler.bind(n)),n.props.updateOnEvents.split(" ").forEach((function(t){window.removeEventListener(t,s)}))}},i.prototype.updateTransitionDuration=function(t){this.transitionDuration=t,this.tooltipElement.style.transitionDuration=t+"ms"},i.prototype.create=function(){return t.__awaiter(this,void 0,void 0,(function(){var e,i,a,l,p;return t.__generator(this,(function(t){switch(t.label){case 0:return e=!this.props.showOnCreate,this.tooltipElement=(c=this,u=r(),h=r(),f=r(),g=r(),u.className="floating-ui-tooltip-root",h.className="floating-ui-tooltip-box",f.className="floating-ui-tooltip-content",g.className="floating-ui-tooltip-arrow",h.appendChild(f),h.appendChild(g),u.appendChild(h),Object.assign(f.style,{maxWidth:c.props.maxWidth+"px"}),f.innerHTML='\n    <div id="tooltip-container">\n    <h3>Default tooltip</h3>\n    </div>\n  ',h.setAttribute("role","tooltip"),n(u,"hidden"),o(u,"hidden"),Object.assign(u.style,{visibility:"hidden",left:"0px",top:"0px"}),u._instance=c,u),this.updateTransitionDuration(this.props.transitionDuration[e?0:1]),i=s(this.tooltipElement).content,a=this.props,l=a.allowHTML,p=a.content,l?i.innerHTML=p:i.innerText=""+p,document.body.appendChild(this.tooltipElement),[4,d(this.props,this.tooltipElement,this.reference,e,!0,this.setState.bind(this))];case 1:return t.sent(),this.hookEventListeners(),[2]}var c,u,h,f,g}))}))},i.prototype.getState=function(){return this.state},i.prototype.setState=function(e){void 0!==e.isShown&&e.isShown!==this.state.isShown&&this.updateTransitionDuration(this.props.transitionDuration[e.isShown?1:0]),this.props.onStateChange(this.state,e),this.state=t.__assign(t.__assign({},this.state),e)},i.prototype.update=function(e){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return e=e||this.toHideTooltip||!1,[4,d(this.props,this.tooltipElement,this.reference,e,!1,this.setState.bind(this))];case 1:return t.sent(),[2]}}))}))},i.prototype.hide=function(){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return this.toHideTooltip=!0,[4,this.update(!0)];case 1:return t.sent(),[2]}}))}))},i.prototype.show=function(){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return this.toHideTooltip=!1,[4,this.update(!1)];case 1:return t.sent(),[2]}}))}))},i.prototype.remove=function(){this.tooltipElement.remove(),this.state={isShown:!1,isRemoved:!0,fui:void 0},this.updateListenerCleanup(),console.log("removed all event listeners and observers"),this.props.onRemove()},i}();return function(e,i){return t.__awaiter(this,void 0,void 0,(function(){var o,n,r,s,a;return t.__generator(this,(function(l){switch(l.label){case 0:return o=i.placement||p.placement,n=i.transitionDuration||p.transitionDuration,r=i.offset||p.offset,Object.keys(i).forEach((function(t){return void 0===i[t]&&delete i[t]})),s=t.__assign(t.__assign(t.__assign({},p),i),{placement:o,transitionDuration:n,offset:r}),[4,(a=new c(s,e)).create()];case 1:return l.sent(),[2,{props:a.props,reference:a.reference,tooltipElement:a.tooltipElement,getState:a.getState.bind(a),show:a.show.bind(a),hide:a.hide.bind(a),remove:a.remove.bind(a),update:a.update.bind(a)}]}}))}))}}));
//# sourceMappingURL=index.js.map
