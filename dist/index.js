!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("tslib"),require("@floating-ui/dom")):"function"==typeof define&&define.amd?define(["tslib","@floating-ui/dom"],e):(t="undefined"!=typeof globalThis?globalThis:t||self)["floating-ui-tooltip"]=e(t.tslib,t.dom)}(this,(function(t,e){"use strict";function i(){return document.createElement("div")}function o(t){return{box:t.querySelector(".floating-ui-tooltip-box"),content:t.querySelector(".floating-ui-tooltip-content"),arrow:t.querySelector(".floating-ui-tooltip-arrow")||void 0}}function n(t,e,i){var o=e+"EventListener";["transitionend","webkitTransitionEnd","oTransitionEnd"].forEach((function(e){t[o](e,i)}))}var r={top:"bottom",right:"left",bottom:"top",left:"right"},a=function(i,n,a,s,l,p){return t.__awaiter(void 0,void 0,void 0,(function(){var d,u,c,h,f,b,g,v,m,w,x,y,_,E,S,k,O,T,D,C,H,A,L,z,U,P,R,j,q,M,N,I,V,F,W,X;return t.__generator(this,(function(B){switch(B.label){case 0:return c=void 0!==(u=(d={}).toFlip)&&u,f=void 0===(h=d.toShift)||h,b=i.placement,g=i.hideOnReferenceHidden,v=i.offset,m=i.hideOnTooltipEscape,w=i.arrowSizeScale,x=i.resetPlacementOnUpdate,y=i.arrow,_=o(n),E=_.arrow,S=12*w,a?(k="auto"===b&&(l||x),O="auto"!==b&&c,T=f&&l,D={middleware:t.__spreadArray(t.__spreadArray(t.__spreadArray(t.__spreadArray(t.__spreadArray([e.offset({mainAxis:v[0],crossAxis:v[1]})],k?[e.autoPlacement()]:[],!0),T?[e.shift({padding:16})]:[],!0),O?[e.flip({fallbackPlacements:["right","left"],fallbackStrategy:"initialPlacement"})]:[],!0),y?[e.arrow({element:E,padding:2})]:[],!0),[e.size({apply:function(t){t.width,t.height,t.reference,t.floating}}),e.hide()],!1)},"auto"!==b&&(D.placement=b),[4,e.computePosition(a,n,D)]):[2];case 1:switch(C=B.sent(),H=C.x,A=C.y,L=C.placement,z=C.middlewareData,U=z.hide,P=U.referenceHidden,R=U.escaped,P&&l&&a.scrollIntoView({behavior:"smooth",block:"center",inline:"center"}),z.arrow&&(j=z.arrow.x,q=z.arrow.y),M=0!==z.arrow.centerOffset,N=g&&P||m&&R||s?"hidden":"visible",n.setAttribute("data-state",N),Object.assign(n.style,{visibility:N,left:H+"px",top:A+"px"}),I=r[L.split("-")[0]],V=0,F=0,W=0,W=null!==j?j+S+"px":"",I){case"top":V=1/1.7,W=null!==j?j+S*V+"px":"";break;case"bottom":V=.5,W=null!==j?j+S*V+"px":"";break;case"left":V=.005,W=null!==j?j+"px":"",F=null!==q?q-S*V/2+"px":"";break;case"right":V=1.2,W=null!==j?j+"px":"",F=null!==q?q-S*V/2+"px":""}return F=null!==q?q-S*V/2+"px":"",F=null!==q?q+"px":"",Object.assign(E.style,((X={visibility:M?"hidden":"visible",left:W,top:F,right:"",bottom:""})[I]="-"+S*V+"px",X)),l?console.log("setting state after newlyShown"):console.log("setting state on update"),p({isShown:"visible"===N,fui:C}),[2,C]}}))}))},s={allowHTML:!0,content:"",arrow:!0,scrollIntoView:!1,transitionDuration:[300,250],offset:[10,0],hideOnClick:!0,onClickOutside:function(t,e){},onShow:function(t){},onHide:function(t){},onStateChange:function(t,e){},onRemove:function(){},placement:"top",resetPlacementOnUpdate:!1,hideOnTooltipEscape:!0,hideOnReferenceHidden:!0,showOnCreate:!0,maxWidth:350,updateDebounce:100,zIndex:99999,arrowSizeScale:1,updateOnEvents:"resize scroll"};function l(t,e){return 0===e?t:function(o){clearTimeout(i),i=setTimeout((function(){t(o)}),e)};var i}var p=function(){function r(t,e){var i,o=this;this.state={isShown:!1,isRemoved:!1,fui:void 0},this.toHideTooltip=!1,this.transitionDuration=0,this.clickHandler=function(t){o.state.isShown&&(o.tooltipElement.contains(t.target)||o.reference.contains(t.target)||o.props.onClickOutside&&o.props.onClickOutside(o,t),"target"===o.props.hideOnClick?t.target===o.reference&&o.hide():o.props.hideOnClick&&o.hide())},this.props=t,this.reference=e,window.tp=this,(i=document.createElement("style")).type="text/css",i.setAttribute("floating-ui-tooltip-default",""),i.textContent=".floating-ui-tooltip-root{--color:#fff;--border-color:#fefefe;--border-color:red;backface-visibility:hidden;background:var(--color);border-radius:6px;box-shadow:0 0 0 1px rgba(6,44,82,.1),0 2px 16px rgba(33,43,54,.08);box-shadow:0 0 20px 4px rgba(154,161,177,.15),0 4px 80px -8px rgba(36,40,47,.25),0 4px 4px -2px rgba(91,94,105,.15);display:flex;font-size:90%;line-height:0px;margin:0;max-width:calc(100vw - 10px);padding:0;position:absolute;transition-duration:.2s;transition-property:transform,visibility,opacity;transition-timing-function:cubic-bezier(.54,1.5,.38,1.11);z-index:9999}.floating-ui-tooltip-arrow{box-shadow:0 0 0 1px rgba(6,44,82,.1),0 2px 16px rgba(33,43,54,.08);height:14px;position:absolute;transform:translateX(-50%) rotate(45deg);width:14px;z-index:-1}.floating-ui-tooltip-box{border-radius:inherit;line-height:normal;margin:0;outline:0;position:relative}.floating-ui-tooltip-root[data-state=hidden]{opacity:0}.floating-ui-tooltip-root[data-state=visible]{opacity:1}.floating-ui-tooltip-content{background-color:#fff;border-radius:inherit;color:#111;padding:0;position:relative;z-index:2}.floating-ui-tooltip-arrow,.floating-ui-tooltip-root{background:var(--color)}",document.head.appendChild(i)}return r.prototype.hookEventListeners=function(){var t=this;this.debouncedUpdate=l(this.update.bind(this),this.props.updateDebounce),this.autoUpdateCleanup=e.autoUpdate(this.reference,this.tooltipElement,(function(){return t.debouncedUpdate(void 0)})),this.props.updateOnEvents.split(" ").forEach((function(e){window.addEventListener(e,(function(){return t.debouncedUpdate(void 0)}))})),window.addEventListener("click",this.clickHandler.bind(this))},r.prototype.updateTransitionDuration=function(t){this.transitionDuration=t,this.tooltipElement.style.transitionDuration=t+"ms"},r.prototype.create=function(){return t.__awaiter(this,void 0,void 0,(function(){var e,n,r,s,l;return t.__generator(this,(function(t){switch(t.label){case 0:return e=!this.props.showOnCreate,this.tooltipElement=(p=i(),d=i(),u=i(),c=i(),p.className="floating-ui-tooltip-root",d.className="floating-ui-tooltip-box",u.className="floating-ui-tooltip-content",c.className="floating-ui-tooltip-arrow",d.appendChild(u),d.appendChild(c),p.appendChild(d),u.innerHTML='\n    <div id="tooltip-container">\n    <h3>Default tooltip</h3>\n    </div>\n  ',d.setAttribute("role","tooltip"),p.setAttribute("data-state",""),Object.assign(p.style,{visibility:"hidden",left:"0px",top:"0px"}),p),this.updateTransitionDuration(this.props.transitionDuration[0]),n=o(this.tooltipElement).content,r=this.props,s=r.allowHTML,l=r.content,s?n.innerHTML=l:n.innerText=""+l,document.body.appendChild(this.tooltipElement),[4,a(this.props,this.tooltipElement,this.reference,e,!0,this.setState.bind(this))];case 1:return t.sent(),this.hookEventListeners(),[2]}var p,d,u,c}))}))},r.prototype.getState=function(){return this.state},r.prototype.setState=function(e){var i=this,o=void 0!==e.isShown&&e.isShown!==this.state.isShown;if(this.props.onStateChange(this.state,e),o&&e.isShown){var r=l(this.props.onShow,0);this.transitionDuration?function(t,e){function i(o){o.target===t&&(n(t,"remove",i),e(),console.log("transition end for event "+o))}n(t,"remove",i),n(t,"add",i)}(this.tooltipElement,(function(){r(i)})):r(this)}this.state=t.__assign(t.__assign({},this.state),e),o&&!e.isShown&&this.props.onHide(this)},r.prototype.update=function(e){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return e=e||this.toHideTooltip||!1,[4,a(this.props,this.tooltipElement,this.reference,e,!1,this.setState.bind(this))];case 1:return t.sent(),[2]}}))}))},r.prototype.hide=function(){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return this.toHideTooltip=!0,[4,this.update(!0)];case 1:return t.sent(),this.updateTransitionDuration(this.props.transitionDuration[0]),[2]}}))}))},r.prototype.show=function(){return t.__awaiter(this,void 0,void 0,(function(){return t.__generator(this,(function(t){switch(t.label){case 0:return this.toHideTooltip=!1,[4,this.update(!1)];case 1:return t.sent(),this.updateTransitionDuration(this.props.transitionDuration[1]),[2]}}))}))},r.prototype.remove=function(){var t=this;this.tooltipElement.remove(),this.state={isShown:!1,isRemoved:!0,fui:void 0},this.autoUpdateCleanup(),window.removeEventListener("click",this.clickHandler.bind(this)),this.props.updateOnEvents.split(" ").forEach((function(e){window.removeEventListener(e,t.debouncedUpdate)})),this.props.onRemove()},r}();return function(e,i){return t.__awaiter(this,void 0,void 0,(function(){var o,n,r,a,l;return t.__generator(this,(function(d){switch(d.label){case 0:return o=i.placement||s.placement,n=i.transitionDuration||s.transitionDuration,r=i.offset||s.offset,console.log(i.offset),Object.keys(i).forEach((function(t){return void 0===i[t]&&delete i[t]})),a=t.__assign(t.__assign(t.__assign({},s),i),{placement:o,transitionDuration:n,offset:r}),[4,(l=new p(a,e)).create()];case 1:return d.sent(),[2,{props:l.props,reference:l.reference,tooltipElement:l.tooltipElement,getState:l.getState.bind(l),show:l.show.bind(l),hide:l.hide.bind(l),remove:l.remove.bind(l),update:l.update.bind(l)}]}}))}))}}));
//# sourceMappingURL=index.js.map
